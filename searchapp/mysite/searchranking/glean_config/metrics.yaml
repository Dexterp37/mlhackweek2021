# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# This file defines the metrics that are recorded by the Glean SDK.
# APIs to use these pings are automatically generated at build time using
# the `glean_parser` PyPI package.

# Metrics in this file may make use of SDK reserved ping names. See
# https://mozilla.github.io/glean/book/dev/core/internal/reserved-ping-names.html
# for additional information.

---
# Schema
$schema: moz://mozilla.org/schemas/glean/metrics/2-0-0

# Category
search:
  # generic
  search_engine:
    type: string
    send_in_pings:
      - action
    description: |
      Search engine used
    notification_emails:
      - gleonard@mozilla.com
    bugs:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    data_reviews:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    expires: never
  search_text:
    type: string
    send_in_pings:
      - action
    description: |
      Submitted search text
    notification_emails:
      - gleonard@mozilla.com
    bugs:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    data_reviews:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    expires: never
  session_id:
    type: string
    send_in_pings:
      - action
    description: |
      Session id
    notification_emails:
      - gleonard@mozilla.com
    bugs:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    data_reviews:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    expires: never

  url_select_timestamp:
    type: datetime
    send_in_pings:
      - action
    description: |
      Timestamp of selection action
    notification_emails:
      - gleonard@mozilla.com
    bugs:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    data_reviews:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    expires: never

  # search results
  url:
    type: labeled_string
    send_in_pings:
      - action
    description: |
      Search result url
    notification_emails:
      - gleonard@mozilla.com
    bugs:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    data_reviews:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    expires: never
  hostname:
    type: labeled_string
    send_in_pings:
      - action
    description: |
      Search result hostname (domain)
    notification_emails:
      - gleonard@mozilla.com
    bugs:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    data_reviews:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    expires: never
  title:
    type: labeled_string
    send_in_pings:
      - action
    description: |
      Search result title
    notification_emails:
      - gleonard@mozilla.com
    bugs:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    data_reviews:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    expires: never
  short_description:
    type: labeled_string
    send_in_pings:
      - action
    description: |
      Initial text of search result
      Search result short description
    notification_emails:
      - gleonard@mozilla.com
    bugs:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    data_reviews:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    expires: never
  preamble:
    type: labeled_string
    send_in_pings:
      - action
    description: |
      Search result starting text (e.g. 'x days ago', '1 of 20')
    notification_emails:
      - gleonard@mozilla.com
    bugs:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    data_reviews:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    expires: never
  position:
    type: labeled_counter
    send_in_pings:
      - action
    description: |
      Search result position in list of results
    notification_emails:
      - gleonard@mozilla.com
    bugs:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    data_reviews:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    expires: never
  selected:
    type: labeled_boolean
    send_in_pings:
      - action
    description: |
      Indicates whether the URL was selected by user
    notification_emails:
      - gleonard@mozilla.com
    bugs:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    data_reviews:
      - https://github.com/mozilla/mlhackweek2021/issues/1
    expires: never
